# åŒè´¦å·å¯¹å†²ç½‘æ ¼ç­–ç•¥ - éƒ¨ç½²ä¸ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
3. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
4. [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
5. [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [é£é™©æç¤º](#é£é™©æç¤º)

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **CPU**: åŒæ ¸2.0GHzä»¥ä¸Š
- **å†…å­˜**: 4GBä»¥ä¸Š
- **å­˜å‚¨**: 10GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼Œå»¶è¿Ÿ<100ms

### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux/Windows/macOS
- **Python**: 3.9æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 14.0ä»¥ä¸Šï¼ˆå¯é€‰ï¼Œç”¨äºWebç•Œé¢ï¼‰

### ä¾èµ–åº“
```bash
# æ ¸å¿ƒä¾èµ–
pip install ccxt>=4.0.0
pip install pandas>=1.5.0
pip install numpy>=1.21.0
pip install asyncio
pip install aiohttp>=3.8.0
pip install websockets>=10.0
pip install loguru>=0.6.0
pip install python-binance>=1.0.16
```

## ğŸš€ å®‰è£…éƒ¨ç½²

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/fm0668/GirdBot.git
cd GirdBot
```

### 2. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨pipå®‰è£…
pip install -r requirements.txt

# æˆ–ä½¿ç”¨conda
conda install --file requirements.txt
```

### 3. éªŒè¯å®‰è£…
```bash
python -c "import ccxt, pandas, numpy; print('å®‰è£…æˆåŠŸ')"
```

## âš™ï¸ é…ç½®è¯´æ˜

### 1. åŸºç¡€é…ç½®æ–‡ä»¶

#### config/strategy_config.py
```python
STRATEGY_CONFIG = {
    # äº¤æ˜“å¯¹é…ç½®
    "symbol": "DOGEUSDC",
    "base_currency": "DOGE",
    "quote_currency": "USDC",
    
    # ATRå‚æ•°
    "atr_period": 14,              # ATRè®¡ç®—å‘¨æœŸ
    "atr_multiplier": 2.0,         # ATRå€æ•°
    "kline_interval": "1h",        # Kçº¿å‘¨æœŸ
    
    # ç½‘æ ¼å‚æ•°
    "max_levels": 20,              # æœ€å¤§ç½‘æ ¼å±‚æ•°
    "max_open_orders": 10,         # æœ€å¤§åŒæ—¶æŒ‚å•æ•°
    "leverage": 25,                # æ æ†å€æ•°
    "safety_factor": 0.9,          # å®‰å…¨ç³»æ•°(90%èµ„é‡‘åˆ©ç”¨ç‡)
    
    # é£é™©æ§åˆ¶
    "max_drawdown": 0.10,          # æœ€å¤§å›æ’¤10%
    "position_limit": 0.80,        # æŒä»“é™åˆ¶80%
    "stop_loss_threshold": -1000,  # æ­¢æŸé˜ˆå€¼-1000 USDC
    
    # è¿è¡Œå‚æ•°
    "check_interval": 1,           # æ£€æŸ¥é—´éš”(ç§’)
    "sync_interval": 5,            # åŒæ­¥é—´éš”(ç§’)
    "log_level": "INFO",           # æ—¥å¿—çº§åˆ«
    
    # æ­¢æŸå‚æ•°
    "stop_loss_enabled": True,     # å¯ç”¨æ­¢æŸ
    "atr_stop_multiplier": 3.0,    # ATRæ­¢æŸå€æ•°
    "time_stop_hours": 24,         # æ—¶é—´æ­¢æŸ(å°æ—¶)
}
```

#### config/account_config.py
```python
ACCOUNT_CONFIG = {
    # å¤šå¤´è´¦æˆ·é…ç½®
    "long_account": {
        "api_key": "your_long_api_key",
        "api_secret": "your_long_api_secret",
        "testnet": False,               # æ˜¯å¦ä½¿ç”¨æµ‹è¯•ç½‘
        "permissions": ["FUTURES_TRADING"],
        "base_url": "https://fapi.binance.com"
    },
    
    # ç©ºå¤´è´¦æˆ·é…ç½®
    "short_account": {
        "api_key": "your_short_api_key",
        "api_secret": "your_short_api_secret",
        "testnet": False,
        "permissions": ["FUTURES_TRADING"],
        "base_url": "https://fapi.binance.com"
    },
    
    # é€šç”¨é…ç½®
    "common": {
        "timeout": 30,                  # è¯·æ±‚è¶…æ—¶æ—¶é—´
        "retry_count": 3,               # é‡è¯•æ¬¡æ•°
        "retry_delay": 1,               # é‡è¯•å»¶è¿Ÿ
    }
}
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
ENVIRONMENT=production

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=logs/strategy.log

# å¸å®‰APIé…ç½®
LONG_API_KEY=your_long_api_key
LONG_API_SECRET=your_long_api_secret
SHORT_API_KEY=your_short_api_key
SHORT_API_SECRET=your_short_api_secret

# é€šçŸ¥é…ç½®
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your_email@gmail.com
EMAIL_PASSWORD=your_email_password

# æ•°æ®åº“é…ç½®(å¯é€‰)
DATABASE_URL=sqlite:///strategy.db
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬å¯åŠ¨

#### å¿«é€Ÿå¯åŠ¨
```bash
# åŸºç¡€å¯åŠ¨
python main.py

# åå°è¿è¡Œ
nohup python main.py > logs/strategy.log 2>&1 &

# ä½¿ç”¨screen
screen -S grid_strategy
python main.py
# Ctrl+A, D ç¦»å¼€screen
```

#### ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
# Linux/macOS
chmod +x start.sh
./start.sh

# Windows
start.bat
```

### 2. é«˜çº§å¯åŠ¨é€‰é¡¹

```bash
# æŒ‡å®šé…ç½®æ–‡ä»¶
python main.py --config config/custom_config.py

# æµ‹è¯•æ¨¡å¼
python main.py --testnet --dry-run

# æŒ‡å®šäº¤æ˜“å¯¹
python main.py --symbol BTCUSDT

# è°ƒè¯•æ¨¡å¼
python main.py --debug --log-level DEBUG

# æŒ‡å®šèµ„é‡‘åˆ†é…
python main.py --initial-balance 1000
```

### 3. Dockeréƒ¨ç½²

#### æ„å»ºé•œåƒ
```bash
docker build -t grid-strategy .
```

#### è¿è¡Œå®¹å™¨
```bash
docker run -d \
  --name grid-strategy \
  -e LONG_API_KEY=your_key \
  -e LONG_API_SECRET=your_secret \
  -e SHORT_API_KEY=your_key \
  -e SHORT_API_SECRET=your_secret \
  -v $(pwd)/logs:/app/logs \
  -v $(pwd)/config:/app/config \
  grid-strategy
```

#### Docker Compose
```yaml
version: '3.8'
services:
  grid-strategy:
    build: .
    container_name: grid-strategy
    restart: unless-stopped
    environment:
      - LONG_API_KEY=${LONG_API_KEY}
      - LONG_API_SECRET=${LONG_API_SECRET}
      - SHORT_API_KEY=${SHORT_API_KEY}
      - SHORT_API_SECRET=${SHORT_API_SECRET}
    volumes:
      - ./logs:/app/logs
      - ./config:/app/config
    ports:
      - "8080:8080"
```

### 4. ç­–ç•¥æ§åˆ¶

#### å¯åŠ¨ç­–ç•¥
```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
python check_system.py

# éªŒè¯é…ç½®
python validate_config.py

# å¯åŠ¨ç­–ç•¥
python main.py
```

#### åœæ­¢ç­–ç•¥
```bash
# ä¼˜é›…åœæ­¢
kill -TERM <PID>

# å¼ºåˆ¶åœæ­¢
kill -KILL <PID>

# ç´§æ€¥åœæ­¢
python emergency_stop.py
```

#### ç­–ç•¥é‡å¯
```bash
# å®Œæ•´é‡å¯
python restart.py

# é‡æ–°åŠ è½½é…ç½®
python reload_config.py
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç›‘æ§

#### å®æ—¶æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/strategy.log

# è¿‡æ»¤ç‰¹å®šçº§åˆ«
tail -f logs/strategy.log | grep ERROR

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -n 100 logs/strategy.log
```

#### æ—¥å¿—åˆ†æå·¥å…·
```bash
# ç»Ÿè®¡è®¢å•æ‰§è¡Œæƒ…å†µ
python analyze_logs.py --type orders

# ç»Ÿè®¡ç›ˆäºæƒ…å†µ
python analyze_logs.py --type pnl

# æ€§èƒ½åˆ†æ
python analyze_logs.py --type performance
```

### 2. ç³»ç»Ÿç›‘æ§

#### å¥åº·æ£€æŸ¥
```bash
# ç³»ç»Ÿå¥åº·æ£€æŸ¥
python health_check.py

# è´¦æˆ·çŠ¶æ€æ£€æŸ¥
python check_accounts.py

# ç½‘ç»œè¿æ¥æ£€æŸ¥
python check_connection.py
```

#### ç›‘æ§è„šæœ¬
```bash
#!/bin/bash
# monitor.sh - ç³»ç»Ÿç›‘æ§è„šæœ¬

while true; do
    # æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ
    if ! pgrep -f "python main.py" > /dev/null; then
        echo "$(date): ç­–ç•¥è¿›ç¨‹å·²åœæ­¢ï¼Œæ­£åœ¨é‡å¯..."
        nohup python main.py > logs/strategy.log 2>&1 &
    fi
    
    # æ£€æŸ¥å†…å­˜ä½¿ç”¨
    memory_usage=$(ps aux | grep "python main.py" | grep -v grep | awk '{print $4}')
    if (( $(echo "$memory_usage > 80" | bc -l) )); then
        echo "$(date): å†…å­˜ä½¿ç”¨è¿‡é«˜: $memory_usage%"
        # å‘é€å‘Šè­¦
        python send_alert.py "å†…å­˜ä½¿ç”¨è¿‡é«˜: $memory_usage%"
    fi
    
    # æ£€æŸ¥æ—¥å¿—é”™è¯¯
    error_count=$(tail -n 100 logs/strategy.log | grep -c ERROR)
    if [ $error_count -gt 5 ]; then
        echo "$(date): å‘ç°å¤§é‡é”™è¯¯: $error_count"
        python send_alert.py "å‘ç°å¤§é‡é”™è¯¯: $error_count"
    fi
    
    sleep 60
done
```

### 3. æ€§èƒ½ç›‘æ§

#### ç³»ç»ŸæŒ‡æ ‡
```python
# performance_monitor.py
import psutil
import time

def monitor_system():
    """ç›‘æ§ç³»ç»Ÿæ€§èƒ½"""
    while True:
        # CPUä½¿ç”¨ç‡
        cpu_percent = psutil.cpu_percent(interval=1)
        
        # å†…å­˜ä½¿ç”¨ç‡
        memory = psutil.virtual_memory()
        
        # ç½‘ç»œIO
        network = psutil.net_io_counters()
        
        # è®°å½•åˆ°æ—¥å¿—
        logger.info(f"ç³»ç»Ÿç›‘æ§: CPU={cpu_percent}%, å†…å­˜={memory.percent}%, "
                   f"ç½‘ç»œæ¥æ”¶={network.bytes_recv}, å‘é€={network.bytes_sent}")
        
        time.sleep(60)
```

#### ç­–ç•¥æŒ‡æ ‡
```python
# strategy_monitor.py
def monitor_strategy_metrics():
    """ç›‘æ§ç­–ç•¥æŒ‡æ ‡"""
    metrics = {
        'total_pnl': 0,
        'daily_pnl': 0,
        'max_drawdown': 0,
        'win_rate': 0,
        'avg_trade_time': 0,
        'active_orders': 0,
        'position_size': 0,
        'margin_usage': 0,
    }
    
    # æ›´æ–°æŒ‡æ ‡
    metrics = update_metrics(metrics)
    
    # è®°å½•åˆ°æ•°æ®åº“
    save_metrics(metrics)
    
    # å‘é€åˆ°ç›‘æ§å¹³å°
    send_to_monitoring(metrics)
```

### 4. å‘Šè­¦ç³»ç»Ÿ

#### å‘Šè­¦é…ç½®
```python
# alert_config.py
ALERT_RULES = {
    'high_drawdown': {
        'threshold': 0.05,
        'enabled': True,
        'message': 'æœ€å¤§å›æ’¤è¶…è¿‡5%'
    },
    'api_error': {
        'threshold': 5,
        'enabled': True,
        'message': 'APIé”™è¯¯æ¬¡æ•°è¿‡å¤š'
    },
    'fund_shortage': {
        'threshold': 0.1,
        'enabled': True,
        'message': 'èµ„é‡‘ä¸è¶³'
    },
    'position_risk': {
        'threshold': 0.8,
        'enabled': True,
        'message': 'æŒä»“é£é™©è¿‡é«˜'
    }
}
```

#### å‘Šè­¦æ–¹å¼
```python
# alert_manager.py
class AlertManager:
    def __init__(self):
        self.telegram_bot = TelegramBot()
        self.email_client = EmailClient()
        self.webhook_client = WebhookClient()
    
    async def send_alert(self, alert_type: str, message: str):
        """å‘é€å‘Šè­¦"""
        # Telegramé€šçŸ¥
        await self.telegram_bot.send_message(f"ğŸš¨ {alert_type}: {message}")
        
        # é‚®ä»¶é€šçŸ¥
        await self.email_client.send_email(
            subject=f"ç­–ç•¥å‘Šè­¦: {alert_type}",
            body=message
        )
        
        # Webhooké€šçŸ¥
        await self.webhook_client.send_webhook({
            'type': alert_type,
            'message': message,
            'timestamp': time.time()
        })
```

## â“ å¸¸è§é—®é¢˜

### 1. å¯åŠ¨é—®é¢˜

#### Q: æç¤º"APIæƒé™ä¸è¶³"
**A**: ç¡®ä¿APIå¯†é’¥å…·æœ‰æœŸè´§äº¤æ˜“æƒé™
```bash
# æ£€æŸ¥APIæƒé™
python check_api_permissions.py
```

#### Q: æç¤º"ç½‘ç»œè¿æ¥å¤±è´¥"
**A**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®
```bash
# æµ‹è¯•è¿æ¥
python test_connection.py
```

#### Q: æç¤º"èµ„é‡‘ä¸è¶³"
**A**: ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„USDCä½™é¢
```bash
# æ£€æŸ¥è´¦æˆ·ä½™é¢
python check_balance.py
```

### 2. è¿è¡Œé—®é¢˜

#### Q: è®¢å•æ‰§è¡Œå¤±è´¥
**A**: æ£€æŸ¥æŒä»“æ¨¡å¼å’Œäº¤æ˜“å¯¹çŠ¶æ€
```bash
# æ£€æŸ¥æŒä»“æ¨¡å¼
python check_position_mode.py

# æ£€æŸ¥äº¤æ˜“å¯¹ä¿¡æ¯
python check_symbol_info.py
```

#### Q: ç­–ç•¥é¢‘ç¹é‡å¯
**A**: æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼Œæ’æŸ¥å…·ä½“é”™è¯¯
```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR logs/strategy.log | tail -20
```

#### Q: ç›ˆäºå¼‚å¸¸
**A**: æ£€æŸ¥å¯¹å†²æ˜¯å¦æ­£å¸¸å·¥ä½œ
```bash
# æ£€æŸ¥å¯¹å†²çŠ¶æ€
python check_hedge_status.py
```

### 3. æ€§èƒ½é—®é¢˜

#### Q: å“åº”é€Ÿåº¦æ…¢
**A**: ä¼˜åŒ–ç½‘ç»œé…ç½®å’Œå‚æ•°è®¾ç½®
```python
# ä¼˜åŒ–é…ç½®
STRATEGY_CONFIG = {
    "check_interval": 0.5,  # é™ä½æ£€æŸ¥é—´éš”
    "max_concurrent_requests": 20,  # å¢åŠ å¹¶å‘æ•°
    "timeout": 10,  # é™ä½è¶…æ—¶æ—¶é—´
}
```

#### Q: å†…å­˜å ç”¨è¿‡é«˜
**A**: å®šæœŸæ¸…ç†ç¼“å­˜å’Œæ—¥å¿—
```bash
# æ¸…ç†æ—¥å¿—
find logs/ -name "*.log" -mtime +7 -delete

# é‡å¯ç­–ç•¥
python restart.py
```

## âš ï¸ é£é™©æç¤º

### 1. å¸‚åœºé£é™©
- **ä»·æ ¼æ³¢åŠ¨**: æç«¯å¸‚åœºæ¡ä»¶ä¸‹å¯èƒ½é€ æˆæŸå¤±
- **æµåŠ¨æ€§é£é™©**: ä½æµåŠ¨æ€§å¯èƒ½å¯¼è‡´æ»‘ç‚¹è¿‡å¤§
- **ç³»ç»Ÿæ€§é£é™©**: æ•´ä½“å¸‚åœºå´©ç›˜çš„é£é™©

### 2. æŠ€æœ¯é£é™©
- **ç½‘ç»œä¸­æ–­**: å¯èƒ½å¯¼è‡´æ— æ³•åŠæ—¶æ­¢æŸ
- **APIé™åˆ¶**: é¢‘ç‡é™åˆ¶å¯èƒ½å½±å“ç­–ç•¥æ‰§è¡Œ
- **è½¯ä»¶æ•…éšœ**: ç¨‹åºé”™è¯¯å¯èƒ½å¯¼è‡´æ„å¤–æŸå¤±

### 3. æ“ä½œé£é™©
- **é…ç½®é”™è¯¯**: é”™è¯¯çš„å‚æ•°è®¾ç½®å¯èƒ½æ”¾å¤§æŸå¤±
- **è´¦æˆ·å®‰å…¨**: APIå¯†é’¥æ³„éœ²çš„é£é™©
- **äººä¸ºæ“ä½œ**: æ‰‹åŠ¨å¹²é¢„å¯èƒ½ç ´åç­–ç•¥é€»è¾‘

### 4. é£é™©æ§åˆ¶å»ºè®®
1. **å°é¢æµ‹è¯•**: å…ˆç”¨å°é¢èµ„é‡‘æµ‹è¯•ç­–ç•¥
2. **åˆ†æ•£é£é™©**: ä¸è¦å°†æ‰€æœ‰èµ„é‡‘æŠ•å…¥å•ä¸€ç­–ç•¥
3. **å®šæœŸæ£€æŸ¥**: å®šæœŸæ£€æŸ¥ç­–ç•¥è¿è¡ŒçŠ¶æ€
4. **æ­¢æŸè®¾ç½®**: è®¾ç½®åˆç†çš„æ­¢æŸå‚æ•°
5. **ç›‘æ§å‘Šè­¦**: å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **GitHub**: https://github.com/fm0668/GirdBot
- **é‚®ç®±**: support@gridbot.com
- **æ–‡æ¡£**: https://docs.gridbot.com

### ç¤¾åŒºæ”¯æŒ
- **Discord**: https://discord.gg/gridbot
- **Telegram**: https://t.me/gridbot_community
- **Reddit**: https://reddit.com/r/gridbot

---

*æœ¬æŒ‡å—æ¶µç›–äº†åŒè´¦å·å¯¹å†²ç½‘æ ¼ç­–ç•¥çš„å®Œæ•´éƒ¨ç½²å’Œä½¿ç”¨æµç¨‹ã€‚åœ¨å®é™…ä½¿ç”¨å‰ï¼Œè¯·åŠ¡å¿…ä»”ç»†é˜…è¯»é£é™©æç¤ºå¹¶è¿›è¡Œå……åˆ†çš„æµ‹è¯•ã€‚*
