# U本位永续合约双账户网格策略运行指南

## 🎯 策略概述

本策略在两个币安U本位永续合约账户上运行，使用USDT作为保证金：

- **长账户**: 专门执行做多操作
- **短账户**: 专门执行做空操作
- **保证金**: 统一使用USDT计价

## 💰 资金要求

### 最低资金要求
- **每个账户最少**: 100 USDT
- **建议初始资金**: 每个账户 500-1000 USDT
- **最大建议资金**: 每个账户不超过10000 USDT

### 资金分配建议
```
总资金 = 长账户资金 + 短账户资金

例如：总资金 2000 USDT
- 长账户: 1000 USDT
- 短账户: 1000 USDT
```

## ⚙️ 配置说明

### 1. API权限设置
确保API密钥具有以下权限：
- ✅ **期货交易**: 开启
- ✅ **读取权限**: 开启
- ❌ **提币权限**: 关闭（安全考虑）

### 2. 交易对配置
当前配置: `DOGEUSDC`
- 合约类型: U本位永续合约
- 保证金: USDT
- 当前价格: ~0.169 USDT

### 3. 风险参数
```properties
# 最大持仓价值(USDT)
max_position_value = 10000

# 保证金比率警戒线
margin_ratio_threshold = 0.8

# 最大杠杆倍数
max_leverage = 10

# 最小USDT余额
min_usdt_balance = 50
```

## 🚀 启动步骤

### 1. 资金充值
向两个币安账户充值USDT：
```bash
# 查看当前余额状态
python3 verify_futures_setup.py
```

### 2. 配置检查
```bash
# 运行部署检查
python3 deployment_check.py

# 验证U本位合约配置
python3 verify_futures_setup.py
```

### 3. 启动策略
```bash
# 启动网格策略
python3 main.py

# 或使用启动脚本
./start.sh
```

### 4. 监控运行
```bash
# 查看实时日志
tail -f logs/grid_strategy.log

# 查看错误日志
tail -f logs/error.log
```

## 📊 策略运行机制

### 网格交易逻辑
1. **价格上涨**:
   - 长账户: 平多单获利，开新多单
   - 短账户: 开空单对冲

2. **价格下跌**:
   - 短账户: 平空单获利，开新空单  
   - 长账户: 开多单抄底

### 双账户对冲
- 通过两个账户的相反操作实现风险对冲
- 降低单边市场风险
- 提高资金利用效率

## ⚠️ 风险提示

### 主要风险
1. **保证金不足**: 账户余额过低可能导致强制平仓
2. **极端行情**: 快速单边行情可能突破网格范围
3. **网络延迟**: API请求延迟可能影响交易执行

### 风险控制措施
1. **设置止损**: 配置最大回撤阈值
2. **分散投资**: 不要投入全部资金
3. **定期监控**: 密切关注策略运行状态
4. **资金预留**: 保持足够的保证金余额

## 🔧 常见问题

### Q1: 账户余额为0怎么办？
**A**: 向币安账户充值USDT，建议每个账户至少100 USDT

### Q2: API权限不足怎么办？
**A**: 检查API密钥权限设置，确保开启期货交易权限

### Q3: 如何调整网格参数？
**A**: 修改配置文件中的网格间距和层数参数

### Q4: 如何停止策略？
**A**: 在终端按 Ctrl+C 停止程序，或发送停止信号

## 📈 性能优化

### 网络优化
- 使用VPS部署，减少网络延迟
- 选择靠近币安服务器的地区

### 参数调优
- 根据市场波动调整ATR参数
- 根据资金规模调整网格层数
- 根据风险偏好调整杠杆倍数

## 📞 技术支持

如遇到问题，请：
1. 查看日志文件排查错误
2. 运行验证脚本检查配置
3. 检查网络连接和API配置

---

**⚠️ 重要提醒**: 
- 永续合约交易存在高风险，请谨慎操作
- 建议先用小资金测试策略效果
- 定期备份配置和日志文件
